!function(e,r,o){"use strict";function t(){var e=a.options[a.selectedIndex].textContent;m.setOption("theme",e),location.hash="#"+e}function n(){var e=r.getElementById("preview"),o=e.contentDocument||e.contentWindow.document;o.open(),o.write(d.getValue()),o.close()}var i=r.getElementById("codemirror"),d=CodeMirror.fromTextArea(i,{lineNumbers:!0,mode:"javascript",theme:"monokai"}),a=r.getElementById("select");a.options[a.selectedIndex].textContent;i=r.getElementById("codemirror-theme");var m=CodeMirror.fromTextArea(i,{lineNumbers:!0,styleActiveLine:!0,mode:"javascript",matchBrackets:!0});o("#select").change(function(){var e=o(":selected").val(),r=o('[title="theme"]');r.attr("href","../../../app-assets/vendors/css/editors/theme/"+e.toLowerCase()+".css"),m.setOption("theme",e)});var l=location.hash&&location.hash.slice(1)||r.location.search&&decodeURIComponent(r.location.search.slice(1));l&&(a.value=l,m.setOption("theme",l)),CodeMirror.on(e,"hashchange",function(){var e=location.hash.slice(1);e&&(a.value=e,t())}),i=r.getElementById("codemirror-loadmode"),CodeMirror.modeURL="../../../app-assets/vendors/js/editors/codemirror/mode/*/*.js";var s=CodeMirror.fromTextArea(i,{lineNumbers:!0}),c=r.getElementById("mode");CodeMirror.on(c,"keypress",function(e){13==e.keyCode&&change()}),o("#change").on("click",function(){var e,o,t,n=c.value;if(e=/.+\.([^.]+)$/.exec(n)){var i=CodeMirror.findModeByExtension(e[1]);i&&(o=i.mode,t=i.mime)}else if(/\//.test(n)){var i=CodeMirror.findModeByMIME(n);i&&(o=i.mode,t=n)}else o=t=n;o?(s.setOption("mode",t),CodeMirror.autoLoadMode(s,o),r.getElementById("modeinfo").textContent=t):alert("Could not find a mode corresponding to "+n)});var u=r.getElementById("codemirror-sublime").value,f=CodeMirror.keyMap.sublime;for(var h in f){var C=f[h];"fallthrough"==h||"..."==C||/find/.test(C)&&!/findUnder/.test(C)||(u+='\t"'+h+'": "'+C+'",\n')}u+="}\n\n// The implementation of joinLines\n",u+=CodeMirror.commands.joinLines.toString().replace(/^function\s*\(/,"function joinLines(").replace(/\n	/g,"\n")+"\n",i=r.getElementById("codemirror-sublime");var d=CodeMirror.fromTextArea(i,{value:u,lineNumbers:!0,theme:"monokai",mode:"javascript",keyMap:"sublime",autoCloseBrackets:!0,matchBrackets:!0,showCursorWhenSelecting:!0,theme:"monokai",tabSize:2});i=r.getElementById("codemirror-js");var g=r.getElementById("codemirror-html"),v=r.getElementById("codemirror-markdown");e.editor=CodeMirror.fromTextArea(i,{mode:"javascript",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),d.foldCode(CodeMirror.Pos(13,0)),e.editor_html=CodeMirror.fromTextArea(g,{mode:"text/html",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),editor_html.foldCode(CodeMirror.Pos(0,0)),editor_html.foldCode(CodeMirror.Pos(21,0)),e.editor_markdown=CodeMirror.fromTextArea(v,{mode:"markdown",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),i=r.getElementById("codemirror-marker");var d=new CodeMirror.fromTextArea(i,{lineNumbers:!0,styleSelectedText:!0,highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0}});d.markText({line:6,ch:26},{line:6,ch:42},{className:"styled-background"});var M,d=new CodeMirror.fromTextArea(r.getElementById("codemirror-preview"),{mode:"text/html"});d.on("change",function(){clearTimeout(M),M=setTimeout(n,300)}),setTimeout(n,300);var p="0123456789",y="          ",B=["#967ADC","#37BC9B","#F6BB42","#3BAFDA","#DA4453","#3f51b5","#2196F3","#ff9800","#e91e63"],x=[];u="";for(var b=1;b<=9;b++){x.push({color:B[b],column:10*b,lineStyle:"dashed"});for(var I=1;I<b;I++)u+=y;u+=p+"\n"}i=r.getElementById("codemirror-ruler"),d=new CodeMirror(i,{rulers:x,value:u+u+u,lineNumbers:!0}),i=r.getElementById("codemirror-tabs"),d=CodeMirror.fromTextArea(i,{lineNumbers:!0,tabSize:4,indentUnit:4,indentWithTabs:!0,mode:"text/html"})}(window,document,jQuery);