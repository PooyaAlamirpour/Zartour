$(window).on("load",function(){function t(){u.decrementCounter(),r()}function n(){u.incrementCounter(),r()}function r(t,n){$("#currentMonth").text(u.monthToDisplayAsText()+" "+u.yearToDisplay());var r=u.daysInMonth(),a=u.gridCellPositions;u.datesGroup.selectAll("text").data(r).attr("x",function(t,n){return a[n][0]}).attr("y",function(t,n){return a[n][1]}).attr("dx",20).attr("dy",20).attr("transform","translate("+u.gridXTranslation+","+u.gridYTranslation+")").text(function(t){return t[0]}),u.calendar.selectAll("rect").data(r).style("fill",function(t){return t[1]}),e()}function e(){var t=a(),n=u.cellWidth/3,r=0,e=d3.layout.pie(),o=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#F8B195","#F67280","#C06C84"]),l=d3.svg.arc().innerRadius(r).outerRadius(n),d=[];for(i=0;i<t.length;i++){var c=e(t[i]);for(j=0;j<c.length;j++)d.push([c[j],i,j])}var s=u.gridCellPositions;u.chartsGroup.selectAll("g.arc").remove();var f=u.chartsGroup.selectAll("g.arc").data(d).enter().append("g").attr("class","arc").attr("transform",function(t){var r=t[1];return"translate("+(n+5*u.gridXTranslation+s[r][0])+", "+(n+1.25*u.gridYTranslation+s[r][1])+")"});f.append("path").attr("fill",function(t,n){return o(t[2])}).attr("d",function(t,n){return l(t[0])}),f.append("text").attr("transform",function(t,n){return"translate("+l.centroid(t[0])+")"}).attr("text-anchor","middle").text(function(t,n){return t[0].value}).style("fill","#FFF")}function a(){for(var t=[],n=0;n<35;n++)t.push([Math.floor(100*Math.random()),Math.floor(100*Math.random()),Math.floor(100*Math.random())]);return t}function o(t,n){u.calendar=d3.select("#pie-calendar").append("svg").attr("class","calendar").attr("width",u.calendarWidth).attr("height",u.calendarHeight).append("g");var r=u.gridCellPositions;u.calendar.selectAll("rect").data(r).enter().append("rect").attr("x",function(t){return t[0]}).attr("y",function(t){return t[1]}).attr("width",u.cellWidth).attr("height",u.cellHeight).style("stroke","#555").style("fill","white").attr("transform","translate("+u.gridXTranslation+","+u.gridYTranslation+")");var a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];u.calendar.selectAll("headers").data([0,1,2,3,4,5,6]).enter().append("text").attr("x",function(t){return r[t][0]}).attr("y",function(t){return r[t][1]}).attr("dx",u.gridXTranslation+5).attr("dy",30).text(function(t){return a[t]}),u.datesGroup=u.calendar.append("svg:g");var i=u.daysInMonth();u.datesGroup.selectAll("daysText").data(i).enter().append("text").attr("x",function(t,n){return r[n][0]}).attr("y",function(t,n){return r[n][1]}).attr("dx",20).attr("dy",20).attr("transform","translate("+u.gridXTranslation+","+u.gridYTranslation+")").text(function(t){return t[0]}),u.chartsGroup=u.calendar.append("svg:g"),e()}function l(){width=ele.node().getBoundingClientRect().width-margin.left-margin.right,container.attr("width",width+margin.left+margin.right),svg.attr("width",width+margin.left+margin.right),x.range([0,width]),svg.selectAll(".d3-xaxis").call(xAxis),svg.selectAll(".d3-line").attr("d",line)}var u=function(){function t(){return T}function n(){return A}function r(){return F}function e(){return D}function a(){return T-10}function o(){return A-40}function l(){return a()/7}function u(){return o()/5}function d(){return w}function c(t){w=t}function s(){G+=1}function f(){G-=1}function g(){var t=new Date;return t.setMonth(W+G),t.getMonth()}function h(){return $[g()]}function p(){var t=new Date;return t.setMonth(W+G),t.getFullYear()}function m(){var t=[];for(y=0;y<5;y++)for(x=0;x<7;x++)t.push([x*l(),y*u()]);return t}function v(){var t=[],n=new Date(p(),g(),1).getDay(),r=new Date(p(),g(),0).getDate();for(i=1;i<=n;i++)t.push([r-n+i,M]);var e=new Date(p(),g()+1,0).getDate();for(i=1;i<=e;i++)t.push([i,C]);var a=35-t.length;for(i=1;i<=a;i++)t.push([i,M]);return t.slice(0,35)}var w,T=(d3.select("#pie-calendar"),1380),A=820,F=10,D=40,M="#EAEAEA",C="#FFFFFF",G=0,W=(new Date).getMonth(),$=["January","February","March","April","May","June","July","August","September","October","November","December"];return{calendarWidth:t(),calendarHeight:n(),gridXTranslation:r(),gridYTranslation:e(),gridWidth:a(),gridHeight:o(),cellWidth:l(),cellHeight:u(),getDatesGroup:d,setDatesGroup:c,incrementCounter:s,decrementCounter:f,monthToDisplay:g(),monthToDisplayAsText:h,yearToDisplay:p,gridCellPositions:m(),daysInMonth:v}}();$(document).ready(function(){o(),r(),$("#back").on("click",t),$("#forward").on("click",n)}),$(window).on("resize",l),$(".menu-toggle").on("click",l)});