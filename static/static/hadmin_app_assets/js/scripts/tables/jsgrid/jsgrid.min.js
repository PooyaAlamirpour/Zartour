$(document).ready(function(){$("#basicScenario").jsGrid({width:"100%",filtering:!0,editing:!0,inserting:!0,sorting:!0,paging:!0,autoload:!0,pageSize:15,pageButtonCount:5,deleteConfirm:"Do you really want to delete the client?",controller:db,fields:[{name:"Name",type:"text",width:150},{name:"Age",type:"number",width:50},{name:"Address",type:"text",width:200},{name:"Country",type:"select",items:db.countries,valueField:"Id",textField:"Name"},{name:"Married",type:"checkbox",title:"Is Married",sorting:!1},{type:"control"}]}),$("#serviceScenario").jsGrid({height:"auto",width:"100%",sorting:!0,paging:!1,autoload:!0,controller:{loadData:function(){var e=$.Deferred();return $.ajax({url:"http://services.odata.org/V3/(S(3mnweai3qldmghnzfshavfok))/OData/OData.svc/Products",dataType:"json"}).done(function(t){e.resolve(t.value)}),e.promise()}},fields:[{name:"Name",type:"text"},{name:"Description",type:"textarea",width:150},{name:"Rating",type:"number",width:50,align:"center",itemTemplate:function(e){return $("<div>").addClass("rating").append(Array(e+1).join("&#9733;"))}},{name:"Price",type:"number",width:50,itemTemplate:function(e){return e.toFixed(2)+"$"}}]}),$("#sorting-table").jsGrid({height:"400px",width:"100%",autoload:!0,selecting:!1,controller:db,fields:[{name:"Name",type:"text",width:150},{name:"Age",type:"number",width:50},{name:"Address",type:"text",width:200},{name:"Country",type:"select",items:db.countries,valueField:"Id",textField:"Name"},{name:"Married",type:"checkbox",title:"Is Married"}]}),$("#sort").on("click",function(){var e=$("#sortingField").val();$("#sorting-table").jsGrid("sort",e)}),$("#validation").jsGrid({width:"100%",filtering:!0,editing:!0,inserting:!0,sorting:!0,paging:!0,autoload:!0,pageSize:15,pageButtonCount:5,deleteConfirm:"Do you really want to delete the client?",controller:db,fields:[{name:"Name",type:"text",width:150,validate:"required"},{name:"Age",type:"number",width:50,validate:{validator:"range",param:[18,80]}},{name:"Address",type:"text",width:200,validate:{validator:"rangeLength",param:[10,250]}},{name:"Country",type:"select",items:db.countries,valueField:"Id",textField:"Name",validate:{message:"Country should be specified",validator:function(e){return e>0}}},{name:"Married",type:"checkbox",title:"Is Married",sorting:!1},{type:"control"}]}),$("#loading").jsGrid({width:"100%",autoload:!0,paging:!0,pageLoading:!0,pageSize:15,pageIndex:2,controller:{loadData:function(e){var t=(e.pageIndex-1)*e.pageSize;return{data:db.clients.slice(t,t+e.pageSize),itemsCount:db.clients.length}}},fields:[{name:"Name",type:"text",width:150},{name:"Age",type:"number",width:50},{name:"Address",type:"text",width:200},{name:"Country",type:"select",items:db.countries,valueField:"Id",textField:"Name"},{name:"Married",type:"checkbox",title:"Is Married"}]}),$("#pager").on("change",function(){var e=parseInt($(this).val(),10);$("#loading").jsGrid("openPage",e)}),$("#customView").jsGrid({width:"100%",filtering:!0,editing:!0,sorting:!0,paging:!0,autoload:!0,pageSize:15,pageButtonCount:5,controller:db,fields:[{name:"Name",type:"text",width:150},{name:"Age",type:"number",width:50},{name:"Address",type:"text",width:200},{name:"Country",type:"select",items:db.countries,valueField:"Id",textField:"Name"},{name:"Married",type:"checkbox",title:"Is Married",sorting:!1},{type:"control",modeSwitchButton:!1,editButton:!1}]}),$(".config-panel input[type=checkbox]").on("click",function(){var e=$(this);$("#customView").jsGrid("option",e.attr("id"),e.is(":checked"))}),$("#batchDelete").jsGrid({width:"100%",autoload:!0,confirmDeleting:!1,paging:!0,controller:{loadData:function(){return db.clients}},fields:[{headerTemplate:function(){return $("<button>").attr("type","button").text("Delete").addClass("btn btn-primary mr-1").on("click",function(){i()})},itemTemplate:function(i,a){return $("<input>").attr("type","checkbox").prop("checked",$.inArray(a,e)>-1).on("change",function(){$(this).is(":checked")?t(a):n(a)})},align:"center",width:50},{name:"Name",type:"text",width:150},{name:"Age",type:"number",width:50},{name:"Address",type:"text",width:200}]});var e=[],t=function(t){e.push(t)},n=function(t){e=$.grep(e,function(e){return e!==t})},i=function(){if(e.length&&confirm("Are you sure?")){a(e);var t=$("#batchDelete");t.jsGrid("option","pageIndex",1),t.jsGrid("loadData"),e=[]}},a=function(e){db.clients=$.map(db.clients,function(t){return $.inArray(t,e)>-1?null:t})};$("#external").jsGrid({width:"100%",paging:!0,pageSize:15,pageButtonCount:5,pagerContainer:"#externalPager",pagerFormat:"current page: {pageIndex} &nbsp;&nbsp; {first} {prev} {pages} {next} {last} &nbsp;&nbsp; total pages: {pageCount}",pagePrevText:"<",pageNextText:">",pageFirstText:"<<",pageLastText:">>",pageNavigatorNextText:"&#8230;",pageNavigatorPrevText:"&#8230;",data:db.clients,fields:[{name:"Name",type:"text",width:150},{name:"Age",type:"number",width:50},{name:"Address",type:"text",width:200},{name:"Country",type:"select",items:db.countries,valueField:"Id",textField:"Name"},{name:"Married",type:"checkbox",title:"Is Married"}]}),$("#reordering").jsGrid({width:"100%",autoload:!0,rowClass:function(e,t){return"client-"+t},controller:{loadData:function(){return db.clients.slice(0,15)}},fields:[{name:"Name",type:"text",width:150},{name:"Age",type:"number",width:50},{name:"Address",type:"text",width:200},{name:"Country",type:"select",items:db.countries,valueField:"Id",textField:"Name"},{name:"Married",type:"checkbox",title:"Is Married",sorting:!1}],onRefreshed:function(){var e=$("#reordering .jsgrid-grid-body tbody");e.sortable({update:function(t,n){var i=/\s*client-(\d+)\s*/,a=$.map(e.sortable("toArray",{attribute:"class"}),function(e){return console.log(i.exec(e)),i.exec(e)[1]});alert("Reordered indexes: "+a.join(", "));var r=$.map(e.find("tr"),function(e){return $(e).data("JSGridItem")});console&&console.log("Reordered items",r)}})}})});