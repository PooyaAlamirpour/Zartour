$(window).on("load",function(){function t(){n=a.node().getBoundingClientRect().width-e.left-e.right,f.attr("width",n+e.left+e.right),h.attr("width",n+e.left+e.right),d.range([0,n]),h.selectAll(".d3-xaxis").call(l),h.selectAll(".d3-area").attr("d",p)}var a=d3.select("#difference-chart"),e={top:20,right:20,bottom:30,left:50},n=a.node().getBoundingClientRect().width-e.left-e.right,r=500-e.top-e.bottom,i=d3.time.format("%Y%m%d").parse,d=d3.time.scale().range([0,n]),o=d3.scale.linear().range([r,0]),l=d3.svg.axis().scale(d).orient("bottom"),s=d3.svg.axis().scale(o).orient("left"),c=d3.svg.area().interpolate("basis").x(function(t){return d(t.date)}).y(function(t){return o(t["New York"])}),p=d3.svg.area().interpolate("basis").x(function(t){return d(t.date)}).y1(function(t){return o(t["New York"])}),f=a.append("svg"),h=f.attr("width",n+e.left+e.right).attr("height",r+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");d3.tsv("../../../app-assets/data/d3/line/difference.tsv",function(t,a){if(t)throw t;a.forEach(function(t){t.date=i(t.date),t["New York"]=+t["New York"],t["San Francisco"]=+t["San Francisco"]}),d.domain(d3.extent(a,function(t){return t.date})),o.domain([d3.min(a,function(t){return Math.min(t["New York"],t["San Francisco"])}),d3.max(a,function(t){return Math.max(t["New York"],t["San Francisco"])})]),h.datum(a),h.append("clipPath").attr("id","clip-below").append("path").attr("d",p.y0(r)),h.append("clipPath").attr("id","clip-above").append("path").attr("d",p.y0(0)),h.append("path").attr("class","d3-area above").attr("clip-path","url(#clip-above)").attr("d",p.y0(function(t){return o(t["San Francisco"])})).style("fill","#00BCD4"),h.append("path").attr("class","d3-area below").attr("clip-path","url(#clip-below)").attr("d",p).style("fill","#E91E63"),h.append("path").attr("class","d3-line").attr("d",c),h.append("g").attr("class","d3-axis d3-xaxis").attr("transform","translate(0,"+r+")").call(l),h.append("g").attr("class","d3-axis d3-yaxis").call(s).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").style("fill","#666").style("font-size",12).text("Temperature (ÂºF)")}),$(window).on("resize",t),$(".menu-toggle").on("click",t)});