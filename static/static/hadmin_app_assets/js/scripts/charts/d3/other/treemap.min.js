$(window).on("load",function(){function t(){this.style("left",function(t){return t.x+"px"}).style("top",function(t){return t.y+"px"}).style("width",function(t){return Math.max(0,t.dx-1)+"px"}).style("height",function(t){return Math.max(0,t.dy-1)+"px"})}var e=d3.select("#treemap"),n={top:20,right:20,bottom:30,left:50},o=e.node().getBoundingClientRect().width-n.left-n.right,l=500-n.top-n.bottom,i=d3.scale.ordinal().range(["#99B898","#FECEA8","#FF847C","#E84A5F","#F8B195","#F67280","#C06C84"]),r=d3.layout.treemap().size([o,l]).sticky(!0).value(function(t){return t.size}),s=e.append("div"),a=s.style("position","relative").style("width",o+n.left+n.right+"px").style("height",l+n.top+n.bottom+"px").style("left",n.left+"px").style("top",n.top+"px");d3.json("../../../app-assets/data/d3/other/treemap.json",function(e,n){if(e)throw e;var o=a.datum(n).selectAll(".node").data(r.nodes).enter().append("div").attr("class","node").call(t).style("background",function(t){return t.children?i(t.name):null}).style("border","solid 1px white").style("font-size","10px").style("line-height","12px").style("overflow","hidden").style("position","absolute").style("text-indent","2px").style("color","#000").text(function(t){return t.children?null:t.name});d3.selectAll("input").on("change",function(){var e="count"===this.value?function(){return 1}:function(t){return t.size};o.data(r.value(e).nodes).transition().duration(1500).call(t)})})});